(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15760,e=>{"use strict";let t=new class{baseUrl;constructor(e){this.baseUrl=e}getToken(){let e=localStorage.getItem("token");return console.log("Getting token from localStorage:",!!e),e}getHeaders(e=!0){let t={"Content-Type":"application/json"};if(e){let e=this.getToken();e?(t.Authorization=`Bearer ${e}`,console.log("Adding Authorization header with token")):console.log("No token available for Authorization header")}return t}async request(e,t={}){let r=`${this.baseUrl}${e}`,n=t.headers&&0===Object.keys(t.headers).length,o={...t,headers:{...this.getHeaders(!n),...t.headers}};try{let e=await fetch(r,o);if(!e.ok){if(401===e.status)throw Error("No token provided");let t=await e.json().catch(()=>({}));throw Error(t.error||`HTTP ${e.status}`)}return await e.json()}catch(e){throw console.error("API Error:",e),e}}async login(e,t){return this.request("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,name:t})})}async verifyToken(){return this.request("/api/auth/verify",{method:"GET"})}async logout(){return this.request("/api/auth/logout",{method:"POST"})}async getEvents(e){let t=new URLSearchParams;e?.category&&t.append("category",e.category),e?.city&&t.append("city",e.city),e?.search&&t.append("search",e.search);let r=t.toString()?`?${t.toString()}`:"";return this.request(`/api/buyer/events${r}`,{method:"GET",headers:{}})}async getEvent(e){return this.request(`/api/buyer/events/${e}`,{method:"GET",headers:{}})}async createEvent(e){return this.request("/api/organizer/events",{method:"POST",body:JSON.stringify(e)})}async getOrganizerEvents(){return this.request("/api/organizer/events",{method:"GET"})}async purchaseTickets(e){return this.request("/api/buyer/purchase",{method:"POST",body:JSON.stringify(e)})}async getMyTickets(){return this.request("/api/buyer/tickets",{method:"GET"})}async resellTicket(e,t){return this.request("/api/buyer/resell",{method:"POST",body:JSON.stringify({ticketId:e,price:t})})}async getResaleListings(){return this.request("/api/buyer/listings",{method:"GET"})}async purchaseResaleTicket(e,t){return this.request(`/api/buyer/listings/${e}/purchase`,{method:"POST",body:JSON.stringify({paymentMethod:t})})}async getAdminEvents(e){let t=e?`?status=${e}`:"";return this.request(`/api/admin/events${t}`,{method:"GET"})}async approveEvent(e,t,r){return this.request("/api/admin/events/approve",{method:"POST",body:JSON.stringify({eventId:e,action:t,rejectionReason:r})})}async uploadImage(e,t="event"){let r=new FormData;r.append("file",e),r.append("type",t);let n=`${this.baseUrl}/api/upload/image`,o=this.getToken(),a={};o&&(a.Authorization=`Bearer ${o}`);try{let e=await fetch(n,{method:"POST",headers:a,body:r}),t=await e.json();if(!e.ok)throw Error(t.error||`HTTP ${e.status}`);return t}catch(e){throw console.error("Image upload error:",e),e}}async deleteImage(e){return this.request(`/api/upload/image?publicId=${e}`,{method:"DELETE"})}}("http://localhost:3001");e.s(["apiClient",0,t])},13056,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(15760);let o=(0,r.createContext)(void 0);function a({children:e}){let[a,i]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[u,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("token");e?(l(e),d(e)):c(!1)},[]);let d=async e=>{try{l(e);let t=await n.apiClient.verifyToken();t.valid&&t.user?i(t.user):(console.error("Token verification failed: Invalid response",t),localStorage.removeItem("token"),l(null))}catch(e){console.error("Token verification failed:",e),localStorage.removeItem("token"),l(null)}finally{c(!1)}},h=async(e,t)=>{try{let r=await n.apiClient.login(e,t);if(r.success&&r.token)console.log("Login successful, saving token:",!!r.token),localStorage.setItem("token",r.token),l(r.token),i(r.user),console.log("User logged in:",r.user);else throw Error("Login failed")}catch(e){throw console.error("Login error:",e),e}};return(0,t.jsx)(o.Provider,{value:{user:a,token:s,loading:u,login:h,logout:()=>{localStorage.removeItem("token"),l(null),i(null),n.apiClient.logout().catch(console.error)},isAuthenticated:!!a&&!!s},children:e})}function i(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}e.s(["AuthProvider",()=>a,"useAuth",()=>i])},18566,(e,t,r)=>{t.exports=e.r(76562)},2355,e=>{"use strict";var t=e.i(47167),r=e.i(71645),n=e.i(18566);function o(){return"undefined"!=typeof window}function a(){return"production"}function i(){return"development"===((o()?window.vam:a())||"production")}function s(e){return RegExp(`/${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(?=[/?#]|$)`)}function l(e){return(0,r.useEffect)(()=>{var t;e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),(0,r.useEffect)(()=>{!function(e={debug:!0}){var t;if(!o())return;!function(e="auto"){if("auto"===e){window.vam=a();return}window.vam=e}(e.mode),window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)}),e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend));let r=e.scriptSrc?e.scriptSrc:i()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js";if(document.head.querySelector(`script[src*="${r}"]`))return;let n=document.createElement("script");n.src=r,n.defer=!0,n.dataset.sdkn="@vercel/analytics"+(e.framework?`/${e.framework}`:""),n.dataset.sdkv="1.6.1",e.disableAutoTrack&&(n.dataset.disableAutoTrack="1"),e.endpoint?n.dataset.endpoint=e.endpoint:e.basePath&&(n.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(n.dataset.dsn=e.dsn),n.onerror=()=>{let e=i()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${r}. ${e}`)},i()&&!1===e.debug&&(n.dataset.debug="false"),document.head.appendChild(n)}({framework:e.framework||"react",basePath:e.basePath??function(){if(void 0!==t.default&&void 0!==t.default.env)return t.default.env.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}(),...void 0!==e.route&&{disableAutoTrack:!0},...e})},[]),(0,r.useEffect)(()=>{e.route&&e.path&&function({route:e,path:t}){var r;null==(r=window.va)||r.call(window,"pageview",{route:e,path:t})}({route:e.route,path:e.path})},[e.route,e.path]),null}function u(e){let o,a,i,{route:u,path:c}=(o=(0,n.useParams)(),a=(0,n.useSearchParams)(),i=(0,n.usePathname)(),o?{route:function(e,t){if(!e||!t)return e;let r=e;try{let e=Object.entries(t);for(let[t,n]of e)if(!Array.isArray(n)){let e=s(n);e.test(r)&&(r=r.replace(e,`/[${t}]`))}for(let[t,n]of e)if(Array.isArray(n)){let e=s(n.join("/"));e.test(r)&&(r=r.replace(e,`/[...${t}]`))}return r}catch(t){return e}}(i,Object.keys(o).length?o:Object.fromEntries(a.entries())),path:i}:{route:null,path:i});return r.default.createElement(l,{path:c,route:u,...e,basePath:function(){if(void 0!==t.default&&void 0!==t.default.env)return t.default.env.NEXT_PUBLIC_VERCEL_OBSERVABILITY_BASEPATH}(),framework:"next"})}function c(e){return r.default.createElement(r.Suspense,{fallback:null},r.default.createElement(u,{...e}))}e.s(["Analytics",()=>c])},32802,e=>{"use strict";var t=e.i(43476),r=e.i(13056);function n({children:e}){return(0,t.jsx)(r.AuthProvider,{children:e})}e.s(["ClientProviders",()=>n])}]);